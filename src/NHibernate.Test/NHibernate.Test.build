<?xml version="1.0" ?>

<project 
	name="NHibernate.Test" 
	default="build" 
	xmlns="http://nant.sf.net/schemas/nant-0.84.win32.net-1.0.xsd"
>
	
	<target name="build">
	
		<csc 
			target="library" 
			define="${current.build.defines}"
			debug="${build.debug}"
			output="${build.dir}/bin/${nant.project.name}.dll" 
		>
		
			<references>
				<includes name="System.dll" />
				<includes name="System.XML.dll" />
				<includes name="System.Data.dll" />
				<includes name="${build.dir}/bin/DotNetMock.dll" />
				<includes name="${build.dir}/bin/DotNetMock.Framework.dll" />
				<includes name="${build.dir}/bin/log4net.dll" />
				<includes name="${build.dir}/bin/nunit.framework.dll"/>
				<includes name="${build.dir}/bin/NHibernate.DomainModel.dll" />
				<includes name="${build.dir}/bin/NHibernate.dll" />
			</references>
			
			<sources>
				<includes name="**/*.cs" />
			</sources>
		</csc>
		
		<copy 
			file="App.config"
			tofile="${build.dir}/bin/NHibernate.Test.dll.config" 
		/>
			
	</target>
	
	<target name="test">
		<nunit2>
			<formatter type="Xml" usefile="true" extension=".xml" outputdir="${build.dir}/bin" />
			<test assemblyname="${build.dir}/bin/NHibernate.Test.dll" appconfig="${build.dir}/bin/NHibernate.Test.dll.config" />
		</nunit2>
	</target>
</project>