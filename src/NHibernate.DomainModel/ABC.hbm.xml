<?xml version="1.0" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.0">
	<class 
		name="NHibernate.DomainModel.A, NHibernate.DomainModel" 
		discriminator-value="0"
	>
		<id 
			name="Id" 
			unsaved-value="0"
		>
			<generator class="assigned" />
			<!-- unsaved-value used to be null and generator was increment in h2.0.3 -->
		</id>
		
		<discriminator 
			column="clazz" 
			type="Int32" 
			not-null="false" 
		/>
		
		<property name="Name" />
		
		<subclass 
			name="NHibernate.DomainModel.B, NHibernate.DomainModel" 
			discriminator-value="-1"
		>
			<property 
				name="Count" 
				column="count_" 
				type="Int32" 
			/>
			
			<subclass 
				name="NHibernate.DomainModel.C1, NHibernate.DomainModel" 
				discriminator-value="null"
			>
				<property 
					name="Address" 
					column="c1" 
				/>
				<one-to-one 
					name="D" 
					class="NHibernate.DomainModel.D, NHibernate.DomainModel" 
				/>
			</subclass>
			<subclass 
				name="NHibernate.DomainModel.C2, NHibernate.DomainModel" 
				discriminator-value="2"
			>
				<property 
					name="Address" 
					column="c2" 
					type="System.String"
				/>
			</subclass>
		</subclass>
	</class>
	<class 
		name="NHibernate.DomainModel.D, NHibernate.DomainModel" 
		discriminator-value="0"
	>
		<!-- 
			proxy does not work yet
			proxy="NHibernate.DomainModel.D, NHibernate.DomainModel"
		-->
		<id 
			name="Id" 
			unsaved-value="0"
		>
			<generator class="assigned" />
		</id>
		<property 
			name="Amount" 
			type="Double" 
		/>
	</class>
</hibernate-mapping>