<?xml version="1.0" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.0">

    <class name="NHibernate.DomainModel.Child" assemblyName="NHibernate.DomainModel">
		<id name="Id" column="id">
			<generator class="assigned" />
		</id>
		
		<property name="FullName" type="String(45)" column="full_name" />
		<property name="FavoriteDate" type="DateTime" column="favorite_date" />
		
		<many-to-one name="Sex" class="NHibernate.DomainModel.SexType" assemblyName="NHibernate.DomainModel" column="sex_type_id"/>
		
		<map name="Parents" table="child_parent" lazy="true">
			<key column="child_id" />
			<index column="which_parent" type="String" />
			<many-to-many column="parent_id" class="NHibernate.DomainModel.Parent" assemblyName="NHibernate.DomainModel" />
		</map>
		
		<list name="Siblings" table="child_siblings" lazy="true">
			<key column="child_id" />
			<index column="which_sibling" />
			<many-to-many column="sibling_child_id" class="NHibernate.DomainModel.Child" assemblyName="NHibernate.DomainModel" />
		</list>

		<!--
			This is not too acurate of real world situations because we can't have
			a link back and forth, maybe it is - if I think someone is my friend but
			they don't think I am their friend ;)
			
		-->
		<array name="Friends" table="child_friends">
			<key column="child_id" />
			<index column="friend_index" />
			<many-to-many column="friend_id" class="NHibernate.DomainModel.Child" assemblyName="NHibernate.DomainModel" />
		</array>
		
	</class>
</hibernate-mapping>
