<?xml version="1.0" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.0">
	<class name="NHibernate.DomainModel.A, NHibernate.DomainModel" discriminator-value="0">
		<!-- 
			proxy doesn't work yet
			proxy="NHibernate.DomainModel.A, NHibernate.DomainModel"
		-->
		<id name="Id" unsaved-value="0" type="Int64">
			<generator class="native" />
		</id>
		<discriminator column="clazz" type="Int32" force="true" not-null="false" />
		<property name="Name" />
		<subclass name="NHibernate.DomainModel.B, NHibernate.DomainModel" discriminator-value="null">
		<!--
			proxy doesn't work yet
			proxy="NHibernate.DomainModel.B, NHibernate.DomainModel"
		-->
			<property name="Count" column="count_" type="Int32" />
			<map name="Map">
				<key column="BID" />
				<index column="MAPKEY" type="String" />
				<element column="MAPVAL" type="Int32" />
			</map>
			<subclass name="NHibernate.DomainModel.C1, NHibernate.DomainModel" discriminator-value="1"
				proxy="NHibernate.DomainModel.C1, NHibernate.DomainModel">
				<property name="Address" column="c1" />
				<one-to-one name="D" class="NHibernate.DomainModel.D, NHibernate.DomainModel" />
			</subclass>
			<subclass name="NHibernate.DomainModel.C2, NHibernate.DomainModel" discriminator-value="2">
				<!-- 
					proxy doesn't work yet
					proxy="NHibernate.DomainModel.C2, NHibernate.DomainModel"
				-->
				<property name="Address" column="c2" />
			</subclass>
		</subclass>
	</class>
	<class name="NHibernate.DomainModel.D, NHibernate.DomainModel" discriminator-value="0" >
		<!-- 
			proxy doesn't work yet
			proxy="NHibernate.DomainModel.D, NHibernate.DomainModel"
		-->
		<id name="Id" unsaved-value="0" type="Int64">
			<generator class="assigned" />
		</id>
		<property name="Amount" type="Double" />
	</class>
</hibernate-mapping>